{"version":3,"sources":["node_modules/process/browser.js","pwacompat.js"],"names":["cachedSetTimeout","cachedClearTimeout","process","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","call","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","Array","arguments","i","push","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","window","capableDisplayModes","defaultSplashColor","defaultSplashTextSize","idealSplashIconSize","minimumSplashIconSize","splashIconPadding","isSafari","navigator","vendor","indexOf","isEdge","userAgent","isEdgePWA","Windows","document","readyState","setup","addEventListener","manifestEl","head","querySelector","manifestHref","href","hrefFactory","buildHrefFactory","options","opt","URL","part","toString","location","Promise","resolve","then","opts","crossOrigin","credentials","fetch","response","json","data","manifest","urlFactory","icons","sort","a","b","parseInt","sizes","appleTouchIcons","map","icon","attr","display","isCapable","meta","updateThemeColorRender","color","themeIsLight","shouldUseLightForeground","t","getEdgeTitleBar","UI","ViewManagement","ApplicationView","getForCurrentView","titleBar","console","debug","foregroundColor","colorToWindowsRGBA","backgroundColor","orientation","simpleOrientationFor","v","prefix","String","substr","backgroundIsLight","itunes","findAppleId","related","filter","app","forEach","match","splashFor","width","height","ratio","devicePixelRatio","ctx","contextForCanvas","scale","fillStyle","fillRect","translate","font","textWidth","measureText","iconWidth","iconHeight","drawImage","fillText","generatedSplash","createElement","setAttribute","canvas","toDataURL","previous","Set","updateSplash","applicationIcon","portrait","screen","landscape","prev","remove","appendChild","add","img","Image","onload","redrawn","updateTransparent","slice","src","catch","err","warn","localName","node","k","content","readColor","c","getImageData","pixelData","f","Math","pow","lum","contrast","abs","image","background","force","context","globalCompositeOperation","getContext"],"mappings":"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","file":"pwacompat.3d96e14c.map","sourceRoot":"..","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\r\n * Copyright 2018 Google Inc. All rights reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\r\n * use this file except in compliance with the License. You may obtain a copy of\r\n * the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\r\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\r\n * License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\r\n\r\n'use strict';\r\n\r\n(function() {\r\n  if (!('fetch' in window)) {\r\n    return;  // basic feature detection: from Mobile Safari 10.3+\r\n  }\r\n\r\n  const capableDisplayModes = ['standalone', 'fullscreen', 'minimal-ui'];\r\n  const defaultSplashColor = '#f8f9fa';\r\n  const defaultSplashTextSize = 24;\r\n  const idealSplashIconSize = 128;\r\n  const minimumSplashIconSize = 48;\r\n  const splashIconPadding = 32;\r\n\r\n  const isSafari = (navigator.vendor && navigator.vendor.indexOf('Apple') !== -1);\r\n  const isEdge = (navigator.userAgent && navigator.userAgent.indexOf('Edge') !== -1);\r\n  const isEdgePWA = (typeof Windows !== 'undefined');\r\n\r\n  function setup() {\r\n    const manifestEl = document.head.querySelector('link[rel=\"pwa-setup\"]');\r\n    const manifestHref = manifestEl ? manifestEl.href : '';\r\n    const hrefFactory = buildHrefFactory([manifestHref, window.location]);\r\n\r\n    Promise.resolve()\r\n        .then(() => {\r\n          if (!manifestHref) {\r\n            throw `can't find <link rel=\"manifest\" href=\"..\" />'`;\r\n          }\r\n          const opts = /** @type {!RequestInit} */ ({});\r\n          if (manifestHref.crossOrigin === 'use-credentials') {\r\n            opts.credentials = 'include';\r\n          }\r\n          return window.fetch(manifestHref, opts);\r\n        })\r\n        .then((response) => response.json())\r\n        .then((data) => process(data, hrefFactory))\r\n        .catch((err) => console.warn('pwacompat.js error', err));\r\n  }\r\n\r\n  /**\r\n   * @param {!Array<string>} options\r\n   * @return {function(string): string}\r\n   */\r\n  function buildHrefFactory(options) {\r\n    for (let i = 0; i < options.length; ++i) {\r\n      const opt = options[i];\r\n      try {\r\n        new URL('', opt);\r\n        return (part) => (new URL(part, opt)).toString();\r\n      } catch (e) {}\r\n    }\r\n    return (part) => part;\r\n  }\r\n\r\n  function push(localName, attr) {\r\n    const node = document.createElement(localName);\r\n    for (const k in attr) {\r\n      node.setAttribute(k, attr[k]);\r\n    }\r\n    document.head.appendChild(node);\r\n    return node;\r\n  }\r\n\r\n  function meta(name, content) {\r\n    if (content) {\r\n      if (content === true) {\r\n        content = 'yes';\r\n      }\r\n      push('meta', {name, content});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {!Object<string, (string|*)>} manifest\r\n   * @param {function(string): string} urlFactory\r\n   */\r\n  function process(manifest, urlFactory) {\r\n    const icons = manifest['icons'] || [];\r\n    icons.sort((a, b) => parseInt(b.sizes, 10) - parseInt(a.sizes, 10));  // largest first\r\n    const appleTouchIcons = icons.map((icon) => {\r\n      // create icons as byproduct\r\n      const attr = {'rel': 'icon', 'href': urlFactory(icon['src']), 'sizes': icon['sizes']};\r\n      push('link', attr);\r\n      if (isSafari) {\r\n        attr['rel'] = 'apple-touch-icon';\r\n        return push('link', attr);\r\n      }\r\n    });\r\n\r\n    const display = manifest['display'];\r\n    const isCapable = capableDisplayModes.indexOf(display) !== -1;\r\n    meta('mobile-web-app-capable', isCapable);\r\n    updateThemeColorRender(/** @type {string} */ (manifest['theme_color']) || 'black');\r\n\r\n    if (isEdge) {\r\n      meta('msapplication-starturl', manifest['start_url'] || '/');\r\n      meta('msapplication-TileColor', manifest['theme_color']);\r\n    }\r\n\r\n    // nb: we check, but this won't override any _earlier_ (in DOM order) theme-color\r\n    if (!document.head.querySelector('[name=\"theme-color\"]')) {\r\n      meta('theme-color', manifest['theme_color']);\r\n    }\r\n\r\n    // TODO(samthor): We don't detect QQ or UC, we just set the vars anyway.\r\n    const orientation = simpleOrientationFor(manifest['orientation']);\r\n    meta('x5-orientation', orientation);      // QQ\r\n    meta('screen-orientation', orientation);  // UC\r\n    if (display === 'fullscreen') {\r\n      meta('x5-fullscreen', 'true');  // QQ\r\n      meta('full-screen', 'yes');     // UC\r\n    } else if (isCapable) {\r\n      meta('x5-page-mode', 'app');         // QQ\r\n      meta('browsermode', 'application');  // UC\r\n    }\r\n\r\n    if (!isSafari) {\r\n      return;  // the rest of this file is for Safari\r\n    }\r\n\r\n    const backgroundIsLight = shouldUseLightForeground(\r\n        /** @type {string} */ (manifest['background_color']) || defaultSplashColor);\r\n    const title = manifest['name'] || manifest['short_name'] || document.title;\r\n\r\n    // Add related iTunes app from manifest.\r\n    const itunes = findAppleId(manifest['related_applications']);\r\n    itunes && meta('apple-itunes-app', `app-id=${itunes}`);\r\n\r\n    // General iOS meta tags.\r\n    meta('apple-mobile-web-app-capable', isCapable);\r\n    meta('apple-mobile-web-app-title', title);\r\n\r\n    function splashFor({width, height}, orientation, icon) {\r\n      const ratio = window.devicePixelRatio;\r\n      const ctx = contextForCanvas({width: width * ratio, height: height * ratio});\r\n\r\n      ctx.scale(ratio, ratio);\r\n      ctx.fillStyle = manifest['background_color'] || defaultSplashColor;\r\n      ctx.fillRect(0, 0, width, height);\r\n      ctx.translate(width / 2, (height - splashIconPadding) / 2);\r\n\r\n      ctx.font = `${defaultSplashTextSize}px HelveticaNeue-CondensedBold`;\r\n      ctx.fillStyle = backgroundIsLight ? 'white' : 'black';\r\n      const textWidth = ctx.measureText(title).width;\r\n\r\n      if (icon) {\r\n        // nb: on Chrome, we need the image >=48px, use the big layout >=80dp, ideal is >=128dp\r\n        let iconWidth = (icon.width / ratio);\r\n        let iconHeight = (icon.height / ratio);\r\n        if (iconHeight > idealSplashIconSize) {\r\n          // clamp to 128px height max\r\n          iconWidth /= (iconHeight / idealSplashIconSize);\r\n          iconHeight = idealSplashIconSize;\r\n        }\r\n\r\n        if (iconWidth >= minimumSplashIconSize && iconHeight >= minimumSplashIconSize) {\r\n          ctx.drawImage(icon, iconWidth / -2, iconHeight / -2, iconWidth, iconHeight);\r\n          ctx.translate(0, iconHeight / 2 + splashIconPadding);\r\n        }\r\n      }\r\n      ctx.fillText(title, textWidth / -2, 0);\r\n\r\n      const generatedSplash = document.createElement('link');\r\n      generatedSplash.setAttribute('rel', 'apple-touch-startup-image');\r\n      generatedSplash.setAttribute('media', `(orientation: ${orientation})`);\r\n      generatedSplash.setAttribute('href', ctx.canvas.toDataURL());\r\n\r\n      return generatedSplash;\r\n    }\r\n\r\n    const previous = new Set();\r\n    function updateSplash(applicationIcon) {\r\n      const portrait = splashFor(window.screen, 'portrait', applicationIcon);\r\n      const landscape = splashFor({\r\n        width: window.screen.height,\r\n        height: window.screen.width,\r\n      }, 'landscape', applicationIcon);\r\n\r\n      previous.forEach((prev) => prev.remove());\r\n\r\n      document.head.appendChild(portrait);\r\n      document.head.appendChild(landscape);\r\n      previous.add(portrait);\r\n      previous.add(landscape);\r\n    }\r\n    updateSplash(null);\r\n\r\n    // fetch the largest icon to generate a splash screen\r\n    if (!appleTouchIcons.length) {\r\n      return;\r\n    }\r\n    const icon = appleTouchIcons[0];\r\n    const img = new Image();\r\n    img.crossOrigin = 'anonymous';\r\n    img.onload = () => {\r\n      updateSplash(img);\r\n\r\n      // also check and redraw icon\r\n      if (!manifest['background_color']) {\r\n        return;\r\n      }\r\n      const redrawn = updateTransparent(img, manifest['background_color']);\r\n      if (redrawn === null) {\r\n        return;  // the rest probably aren't interesting either\r\n      }\r\n      icon.href = redrawn;\r\n\r\n      // fetch and fix all remaining icons\r\n      appleTouchIcons.slice(1).forEach((icon) => {\r\n        const img = new Image();\r\n        img.crossOrigin = 'anonymous';\r\n        img.onload = () => {\r\n          const redrawn = updateTransparent(img, manifest['background_color'], true);\r\n          icon.href = redrawn;\r\n        };\r\n        img.src = icon.href;\r\n      });\r\n\r\n    };\r\n    img.src = icon.href;\r\n  }\r\n\r\n  function findAppleId(related) {\r\n    let itunes;\r\n    (related || [])\r\n        .filter((app) => app['platform'] === 'itunes')\r\n        .forEach((app) => {\r\n          if (app['id']) {\r\n            itunes = app['id'];\r\n          } else {\r\n            const match = app['url'].match(/id(\\d+)/);\r\n            if (match) {\r\n              itunes = match[1];\r\n            }\r\n          }\r\n        });\r\n    return itunes;\r\n  }\r\n\r\n  function simpleOrientationFor(v) {\r\n    v = String(v || '');\r\n    const prefix = v.substr(0, 3);\r\n    if (prefix === 'por') {\r\n      return 'portrait';\r\n    } else if (prefix === 'lan') {\r\n      return 'landscape';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * @param {string} color\r\n   */\r\n  function updateThemeColorRender(color) {\r\n    if (!(isSafari || isEdgePWA)) {\r\n      return;\r\n    }\r\n\r\n    const themeIsLight = shouldUseLightForeground(color);\r\n    if (isSafari) {\r\n      // nb. Safari 11.3+ gives a deprecation warning about this meta tag.\r\n      // TODO(samthor): Potentially set black-translucent in 'fullscreen'.\r\n      meta('apple-mobile-web-app-status-bar-style', themeIsLight ? 'black' : 'default');\r\n    } else {\r\n      // Edge PWA\r\n      const t = getEdgeTitleBar();\r\n      if (t === null) {\r\n        console.debug('UWP no titleBar')\r\n        return;\r\n      }\r\n      t.foregroundColor = colorToWindowsRGBA(themeIsLight ? 'black' : 'white');\r\n      t.backgroundColor = colorToWindowsRGBA(color);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {?ApplicationViewTitleBar}\r\n   */\r\n  function getEdgeTitleBar() {\r\n    try {\r\n      return Windows.UI.ViewManagement.ApplicationView.getForCurrentView().titleBar;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The Windows titlebar APIs expect an object of {r, g, b, a}.\r\n   *\r\n   * @param {string} color\r\n   * @return {WindowsColor}\r\n   */\r\n  function colorToWindowsRGBA(color) {\r\n    const data = readColor(color);\r\n    return /** @type {WindowsColor} */ ({\r\n      'r': data[0],\r\n      'g': data[1],\r\n      'b': data[2],\r\n      'a': data[3],\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {string} color\r\n   * @return {!Uint8ClampedArray}\r\n   */\r\n  function readColor(color) {\r\n    const c = contextForCanvas();\r\n    c.fillStyle = color;\r\n    c.fillRect(0, 0, 1, 1);\r\n    return c.getImageData(0, 0, 1, 1).data;\r\n  }\r\n\r\n  /**\r\n   * @param {string} color\r\n   * @return {boolean}\r\n   */\r\n  function shouldUseLightForeground(color) {\r\n    const pixelData = readColor(color);\r\n\r\n    // From https://cs.chromium.org/chromium/src/chrome/android/java/src/org/chromium/chrome/browser/util/ColorUtils.java\r\n    const data = pixelData.map((v) => {\r\n      const f = v / 255;\r\n      return (f < 0.03928) ? f / 12.92 : Math.pow((f + 0.055) / 1.055, 2.4);\r\n    });\r\n    const lum = 0.2126 * data[0] + 0.7152 * data[1] + 0.0722 * data[2];\r\n    const contrast = Math.abs((1.05) / (lum + 0.05));\r\n    return contrast > 3;\r\n  }\r\n\r\n  function updateTransparent(image, background, force=false) {\r\n    const context = contextForCanvas(image);\r\n    context.drawImage(image, 0, 0);\r\n\r\n    // look for transparent pixel in top-left\r\n    // TODO: Chrome actually checks the four corners for some cases.\r\n    if (!force) {\r\n      const imageData = context.getImageData(0, 0, 1, 1);\r\n      if (imageData.data[3] == 255) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    context.globalCompositeOperation = 'destination-over';  // only replace transparent areas\r\n    context.fillStyle = background;\r\n    context.fillRect(0, 0, image.width, image.height);\r\n    return context.canvas.toDataURL();\r\n  }\r\n\r\n  function contextForCanvas({width, height} = {width: 1, height: 1}) {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    return canvas.getContext('2d');\r\n  }\r\n\r\n  // actually run PWACompat here\r\n  if (document.readyState === 'complete') {\r\n    setup();\r\n  } else {\r\n    window.addEventListener('load', setup);\r\n  }\r\n}());\r\n"]}